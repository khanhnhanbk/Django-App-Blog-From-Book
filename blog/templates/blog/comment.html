{% load static %}
<div class="comment mb-4" id="comment-{{ comment.id }}">
  <div class="card">
    <div class="card-body">
      <div class="d-flex align-items-center mb-2">
        <img
          src="{% static 'blog/images/default-avatar.png' %}"
          alt="User Avatar"
          class="rounded-circle mr-3"
          width="40"
          height="40"
        />
        <div>
          <h6 class="mb-0">{{ comment.name }}</h6>
          <small class="text-muted"
            >{{ comment.created|date:"F d, Y H:i" }}</small
          >
        </div>
      </div>
      <p class="card-text">{{ comment.body|linebreaks }}</p>
      <button
        class="btn btn-sm btn-outline-primary reply-btn"
        data-comment-id="{{ comment.id }}"
      >
        <i class="fas fa-reply"></i> Reply
      </button>
    </div>
  </div>

  <div
    id="reply-form-{{ comment.id }}"
    class="reply-form-container mt-3 d-none"
  >
    <form
      class="reply-form"
      action="{% url 'blog:post_comment' comment.post.id %}"
      method="post"
    >
      {% csrf_token %}
      <input type="hidden" name="parent" value="{{ comment.id }}" />
      {% if not user.is_authenticated %}
      <div class="form-group">
        <input
          type="text"
          name="name"
          class="form-control"
          placeholder="Your Name"
          required
        />
      </div>
      <div class="form-group">
        <input
          type="email"
          name="email"
          class="form-control"
          placeholder="Your Email"
          required
        />
      </div>
      {% endif %}
      <div class="form-group">
        <textarea
          name="body"
          class="form-control"
          rows="3"
          placeholder="Your Reply"
          required
        ></textarea>
      </div>
      <button type="submit" class="btn btn-primary">Submit Reply</button>
    </form>
  </div>

  {% if comment.replies.all %}
  <div class="replies mt-3 ml-4">
    {% for reply in comment.replies.all %} {% include "blog/comment.html" with
    comment=reply %} {% endfor %}
  </div>
  {% endif %}
</div>
